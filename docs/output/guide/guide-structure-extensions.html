<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/90d046f2/css/bootstrap.css" rel="stylesheet">
<link href="./assets/c6368d94/solarized_light.css" rel="stylesheet">
<link href="./assets/9f5cdd92/style.css" rel="stylesheet">
<script src="./assets/a6e53573/jquery.js"></script>
<script src="./assets/90d046f2/js/bootstrap.js"></script>
<script src="./assets/218ce2e5/jssearch.js"></script>    <title>Phần mở rộng (Extensions) - Kiến trúc ứng dụng (Application Structure) - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w12310" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w12310-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">The Definitive Guide to Yii 2.0</a></div><div id="w12310-collapse" class="collapse navbar-collapse"><ul id="w12311" class="navbar-nav nav"><li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-12294" data-toggle="collapse" data-parent="#navigation">Giới thiệu <b class="caret"></b></a><div id="navigation-12294" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">Về Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Nâng cấp lên từ phiên bản 1.1</a></div>
<a class="list-group-item" href="#navigation-12295" data-toggle="collapse" data-parent="#navigation">Bắt đầu <b class="caret"></b></a><div id="navigation-12295" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Cài đặt Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Thực hiện chạy ứng dụng</a>
<a class="list-group-item" href="./guide-start-hello.html">Viết lời chào đầu tiên</a>
<a class="list-group-item" href="./guide-start-forms.html">Làm việc với Forms</a>
<a class="list-group-item" href="./guide-start-databases.html">Làm việc với Databases</a>
<a class="list-group-item" href="./guide-start-gii.html">Sử dụng Gii để sinh code</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Mức cao hơn</a></div>
<a class="list-group-item active" href="#navigation-12296" data-toggle="collapse" data-parent="#navigation">Kiến trúc ứng dụng (Application Structure) <b class="caret"></b></a><div id="navigation-12296" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-structure-overview.html">Tổng quan về kiến trúc ứng dụng</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Mục Scripts</a>
<a class="list-group-item" href="./guide-structure-applications.html">Ứng dụng (Applications)</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Thành phần ứng dụng</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Bộ điều khiển (Controllers)</a>
<a class="list-group-item" href="./guide-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-structure-filters.html">Bộ lọc (Filters)</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-structure-assets.html">Assets</a>
<a class="list-group-item active" href="./guide-structure-extensions.html">Phần mở rộng (Extensions)</a></div>
<a class="list-group-item" href="#navigation-12297" data-toggle="collapse" data-parent="#navigation">Yêu cầu xử lý (Handling Requests) <b class="caret"></b></a><div id="navigation-12297" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Routing và URL Creation</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Yêu cầu (Requests)</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Responses</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sessions và Cookies</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Xử lý lỗi (Handling Error)</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Logging</a></div>
<a class="list-group-item" href="#navigation-12298" data-toggle="collapse" data-parent="#navigation">Các khái niệm chính <b class="caret"></b></a><div id="navigation-12298" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">Thành phần (Components)</a>
<a class="list-group-item" href="./guide-concept-properties.html">Thuộc tính (Properties)</a>
<a class="list-group-item" href="./guide-concept-events.html">Sự kiện (Events)</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Hành vi (Behaviors)</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Cấu hình (Configurations)</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Bí danh (Aliases)</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Lớp tự động nạp (Autoloading)</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-12299" data-toggle="collapse" data-parent="#navigation">Làm việc với Databases <b class="caret"></b></a><div id="navigation-12299" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Data Access Objects</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Query Builder</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Migrations</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elasticsearch.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-12300" data-toggle="collapse" data-parent="#navigation">Nhận dữ liệu từ user <b class="caret"></b></a><div id="navigation-12300" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Tạo mới Forms</a>
<a class="list-group-item" href="./guide-input-validation.html">Kiểm tra dữ liệu đầu vào (Validating Input)</a>
<a class="list-group-item" href="./guide-input-file-upload.html">File Upload</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Thu thập dữ liệu từ danh sách đầu vào (Đang phát triển)</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Lấy dữ liệu cho nhiều Models (Chưa giải quyết)</a></div>
<a class="list-group-item" href="#navigation-12301" data-toggle="collapse" data-parent="#navigation">Hiển thị dữ liệu <b class="caret"></b></a><div id="navigation-12301" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatter.html">Định dạng dữ liệu (Data Formatting)</a>
<a class="list-group-item" href="./guide-output-pagination.html">Phân trang (Pagination)</a>
<a class="list-group-item" href="./guide-output-sorting.html">Sắp xếp (Sorting)</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Cung cấp dữ liệu ra (Data Providers)</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Dữ liệu Widgets</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">làm việc với Client Scripts</a>
<a class="list-group-item" href="./guide-output-theming.html">Giao diện (Theming)</a></div>
<a class="list-group-item" href="#navigation-12302" data-toggle="collapse" data-parent="#navigation">Bảo mật (Security) <b class="caret"></b></a><div id="navigation-12302" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">Xác thực (Authentication)</a>
<a class="list-group-item" href="./guide-security-authorization.html">Quyền (Authorization)</a>
<a class="list-group-item" href="./guide-security-passwords.html">Các thao tác xử lý với Passwords (Đang phát triển)</a>
<a class="list-group-item" href="./guide-security-auth-clients.html">Auth Clients</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Best Practices</a></div>
<a class="list-group-item" href="#navigation-12303" data-toggle="collapse" data-parent="#navigation">Bộ nhớ Cache <b class="caret"></b></a><div id="navigation-12303" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-caching-data.html">Cache dữ liệu</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP Caching</a></div>
<a class="list-group-item" href="#navigation-12304" data-toggle="collapse" data-parent="#navigation">RESTful Web Services <b class="caret"></b></a><div id="navigation-12304" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Bắt đầu</a>
<a class="list-group-item" href="./guide-rest-resources.html">Tài nguyên (Resources)</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Bộ điều khiển (Controllers)</a>
<a class="list-group-item" href="./guide-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Định dạng thông điệp gửi đi (Response Formatting)</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Xác thực (Authentication)</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Phiên bản (Version)</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Error Handling</a></div>
<a class="list-group-item" href="#navigation-12305" data-toggle="collapse" data-parent="#navigation">Công cụ phát triển (Development Tools) <b class="caret"></b></a><div id="navigation-12305" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tool-debugger.html">Thanh công cụ gỡ lỗi và sửa lỗi (Debug Toolbar và Debugger)</a>
<a class="list-group-item" href="./guide-tool-gii.html">Sử dụng Gii để tạo code</a>
<a class="list-group-item" href="./guide-tool-api-doc.html">Tạo tài liệu về API </a></div>
<a class="list-group-item" href="#navigation-12306" data-toggle="collapse" data-parent="#navigation">Testing <b class="caret"></b></a><div id="navigation-12306" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Thiết lập môi trường</a>
<a class="list-group-item" href="./guide-test-unit.html">Unit Tests</a>
<a class="list-group-item" href="./guide-test-functional.html">Kiểm tra chức năng (Functional Tests)</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Acceptance Tests</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a></div>
<a class="list-group-item" href="#navigation-12307" data-toggle="collapse" data-parent="#navigation">Chủ đề năng cao <b class="caret"></b></a><div id="navigation-12307" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">Advanced Application Template</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Building Application from Scratch</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Giao diện dòng lệnh (Console Commands)</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Quốc tế hóa (Internationalization)</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Thư (Mailing)</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Tối ưu hiệu năng ứng dụng (Performance Tuning)</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Shared Hosting Environment</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Template Engines</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Working with Third-Party Code</a></div>
<a class="list-group-item" href="#navigation-12308" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-12308" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap Widgets</a>
<a class="list-group-item" href="./guide-widget-jui.html">jQuery UI Widgets</a></div>
<a class="list-group-item" href="#navigation-12309" data-toggle="collapse" data-parent="#navigation">Helpers <b class="caret"></b></a><div id="navigation-12309" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>エクステンション <span id="ekusutenshon"></span><a href="#ekusutenshon" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#using-extensions">エクステンションを使う</a></li>
<li><a href="#creating-extensions">エクステンションを作成する</a></li>
<li><a href="#core-extensions">コアエクステンション</a></li></ol></div>
<p>エクステンションは、Yii のアプリケーションで使われることに限定して設計され、そのまますぐに使える機能を提供する再配布可能なソフトウェアパッケージです。
例えば、<a href="https://github.com/yiisoft/yii2-debug">yiisoft/yii2-debug</a> エクステンションは、あなたのアプリケーションにおいて、全てのページの末尾に便利なデバッグツールバーを追加して、ページが生成される過程をより容易に把握できるように手助けしてくれます。
エクステンションを使うと、あなたの開発プロセスを加速することが出来ます。
また、あなたのコードをエクステンションとしてパッケージ化すると、あなたの優れた仕事を他の人たちと共有することが出来ます。</p>
<blockquote class="info"><p><strong>Info: </strong>「エクステンション」という用語は Yii に限定されたソフトウェアパッケージを指すものとして使用します。
  Yii がなくても使用できる汎用のソフトウェアパッケージを指すためには、「パッケージ」または「ライブラリ」という用語を使うことにします。</p>
</blockquote>
<h2>エクステンションを使う  <span id="using-extensions"></span><a href="#using-extensions" class="hashlink">&para;</a></h2><p>エクステンションを使うためには、先ずはそれをインストールする必要があります。
ほとんどのエクステンションは <a href="https://getcomposer.org/">Composer</a> のパッケージとして配布されていて、次の二つの簡単なステップをふめばインストールすることが出来ます。</p>
<ol>
<li>アプリケーションの <code>composer.json</code> ファイルを修正して、どのエクステンション (Composer パッケージ) をインストールしたいかを指定する。</li>
<li><code>composer install</code> コマンドを走らせて指定したエクステンションをインストールする。</li>
</ol>
<p><a href="https://getcomposer.org/">Composer</a> を持っていない場合は、それをインストールする必要があることに注意してください。</p>
<p>デフォルトでは、Composer はオープンソース Composer パッケージの最大のレポジトリである <a href="https://packagist.org/">Packagist</a> に登録されたパッケージをインストールします。
エクステンションは Packagist で探すことが出来ます。
また、<a href="https://getcomposer.org/doc/05-repositories.md#repository">自分自身のレポジトリを作成</a> して、それを使うように Composer を構成することも出来ます。
これは、あなたがプライベートなエクステンションを開発していて、それを自分のプロジェクト間でのみ共有したい場合に役に立つ方法です。</p>
<p>Composer によってインストールされるエクステンションは <code>BasePath/vendor</code> ディレクトリに保存されます。
ここで <code>BasePath</code> は、アプリケーションの <a href="guide-structure-applications.html#basePath">ベースパス</a> を指します。
Composer は依存関係を管理するものですから、あるパッケージをインストールするときには、それが依存する全てのパッケージも同時にインストールします。</p>
<p>例えば、<code>yiisoft/yii2-imagine</code> エクステンションをインストールするためには、あなたの <code>composer.json</code> を次のように修正します。</p>
<pre><code class="hljs json language-json">{
    // ...

    "<span class="hljs-attribute">require</span>": <span class="hljs-value">{
        // ... 他の依存パッケージ

        "<span class="hljs-attribute">yiisoft/yii2-imagine</span>": <span class="hljs-value"><span class="hljs-string">"~2.0.0"</span>
    </span>}
</span>}
</code></pre>
<p>インストール完了後には、<code>BasePath/vendor</code> の下に <code>yiisoft/yii2-imagine</code> ディレクトリが作られている筈です。
それと同時に、<code>imagine/imagine</code> という別のディレクトリも作られて、依存するパッケージがそこにインストールされている筈です。</p>
<blockquote class="info"><p><strong>Info: </strong><code>yiisoft/yii2-imagine</code> は Yii 開発チームによって開発され保守されるコアエクステンションの一つです。
  全てのコアエクステンションは <a href="https://packagist.org/">Packagist</a> でホストされ、<code>yiisoft/yii2-xyz</code> のように名付けられます。
  ここで <code>xyz</code> はエクステンションによってさまざまに変ります。</p>
</blockquote>
<p>これであなたはインストールされたエクステンションをあなたのアプリケーションの一部であるかのように使うことが出来ます。
次の例は、<code>yiisoft/yii2-imagine</code> エクステンションによって提供される <code>yii\imagine\Image</code> クラスをどのようにして使うことが出来るかを示すものです。</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Yii</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">imagine</span>\<span class="hljs-title">Image</span>;

<span class="hljs-comment">// サムネール画像を生成する</span>
Image::thumbnail(<span class="hljs-string">'@webroot/img/test-image.jpg'</span>, <span class="hljs-number">120</span>, <span class="hljs-number">120</span>)
    -&gt;save(Yii::getAlias(<span class="hljs-string">'@runtime/thumb-test-image.jpg'</span>), [<span class="hljs-string">'quality'</span> =&gt; <span class="hljs-number">50</span>]);
</code></pre>
<blockquote class="info"><p><strong>Info: </strong>エクステンションのクラスは <a href="guide-concept-autoloading.html">Yii クラスオートローダ</a> によってオートロードされます。</p>
</blockquote>
<h3>エクステンションを手作業でインストールする  <span id="installing-extensions-manually"></span><a href="#installing-extensions-manually" class="hashlink">&para;</a></h3><p>あまり無いことですが、いくつかまたは全てのエクステンションを Composer に頼らずに手作業でインストールしたい場合があるかもしれません。
そうするためには、次のようにしなければなりません。</p>
<ol>
<li>エクステンションのアーカイブファイルをダウンロードして、<code>vendor</code> ディレクトリに解凍する。</li>
<li>もし有れば、エクステンションによって提供されているクラスオートローダをインストールする。</li>
<li>指示に従って、依存するエクステンションを全てダウンロードしインストールする。</li>
</ol>
<p>エクステンションがクラスオートローダを持っていなくても、<a href="http://www.php-fig.org/psr/psr-4/">PSR-4 標準</a> に従っている場合は、Yii によって提供されているクラスオートローダを使ってエクステンションのクラスをオートロードすることが出来ます。
必要なことは、エクステンションのルートディレクトリのための <a href="guide-concept-aliases.html#defining-aliases">ルートエイリアス</a> を宣言することだけです。
例えば、エクステンションを <code>vendor/mycompany/myext</code> というディレクトリにインストールしたと仮定します。
そして、エクステンションのクラスは <code>myext</code> 名前空間の下にあるとします。
その場合、アプリケーションの構成情報に下記のコードを含めます。</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'aliases'</span> =&gt; [
        <span class="hljs-string">'@myext'</span> =&gt; <span class="hljs-string">'@vendor/mycompany/myext'</span>,
    ],
]
</code></pre>
<h2>エクステンションを作成する  <span id="creating-extensions"></span><a href="#creating-extensions" class="hashlink">&para;</a></h2><p>あなたの優れたコードを他の人々と共有する必要があると感じたときは、エクステンションを作成することを考慮するのが良いでしょう。
エクステンションは、ヘルパクラス、ウィジェット、モジュールなど、どのようなコードでも含むことが出来ます。</p>
<p>エクステンションは、<a href="https://getcomposer.org/">Composer パッケージ</a> の形式で作成することが推奨されます。
そうすれば、直前の項で説明したように、いっそう容易に他のユーザによってインストールされ、使用されることが出来ます。</p>
<p>以下は、エクステンションを Composer のパッケージとして作成するために踏む基本的なステップです。</p>
<ol>
<li>エクステンションのためのプロジェクトを作成して、<a href="https://github.com">github.com</a> などの VCS レポジトリ上でホストします。
エクステンションに関する開発と保守の作業はこのレポジトリ上でしなければなりません。</li>
<li>プロジェクトのルートディレクトリに、Composer によって要求される <code>composer.json</code> という名前のファイルを作成します。
詳細については、次の項を参照してください。</li>
<li>エクステンションを <a href="https://packagist.org/">Packagist</a> などの Composer レポジトリに登録します。
そうすると、他のユーザがエクステンションを見つけて Composer を使ってインストールすることが出来るようになります。</li>
</ol>
<h3><code>composer.json</code>  <span id="composer-json"></span><a href="#composer-json" class="hashlink">&para;</a></h3><p>全ての Composer パッケージは、ルートディレクトリに <code>composer.json</code> というファイルを持たなければなりません。
このファイルはパッケージに関するメタデータを含むものです。
このファイルに関する完全な仕様は <a href="https://getcomposer.org/doc/01-basic-usage.md#composer-json-project-setup">Composer Manual</a> に記載されています。
次の例は、<code>yiisoft/yii2-imagine</code> エクステンションのための <code>composer.json</code> ファイルを示すものです。</p>
<pre><code class="hljs json language-json">{
    // パッケージ名
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"yiisoft/yii2-imagine"</span></span>,

    // パッケージタイプ
    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"yii2-extension"</span></span>,

    "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-string">"The Imagine integration for the Yii framework"</span></span>,
    "<span class="hljs-attribute">keywords</span>": <span class="hljs-value">[<span class="hljs-string">"yii2"</span>, <span class="hljs-string">"imagine"</span>, <span class="hljs-string">"image"</span>, <span class="hljs-string">"helper"</span>]</span>,
    "<span class="hljs-attribute">license</span>": <span class="hljs-value"><span class="hljs-string">"BSD-3-Clause"</span></span>,
    "<span class="hljs-attribute">support</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">issues</span>": <span class="hljs-value"><span class="hljs-string">"https://github.com/yiisoft/yii2/issues?labels=ext%3Aimagine"</span></span>,
        "<span class="hljs-attribute">forum</span>": <span class="hljs-value"><span class="hljs-string">"http://www.yiiframework.com/forum/"</span></span>,
        "<span class="hljs-attribute">wiki</span>": <span class="hljs-value"><span class="hljs-string">"http://www.yiiframework.com/wiki/"</span></span>,
        "<span class="hljs-attribute">irc</span>": <span class="hljs-value"><span class="hljs-string">"irc://irc.freenode.net/yii"</span></span>,
        "<span class="hljs-attribute">source</span>": <span class="hljs-value"><span class="hljs-string">"https://github.com/yiisoft/yii2"</span>
    </span>}</span>,
    "<span class="hljs-attribute">authors</span>": <span class="hljs-value">[
        {
            "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"Antonio Ramirez"</span></span>,
            "<span class="hljs-attribute">email</span>": <span class="hljs-value"><span class="hljs-string">"amigo.cobos@gmail.com"</span>
        </span>}
    ]</span>,

    // 依存パッケージ
    "<span class="hljs-attribute">require</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">yiisoft/yii2</span>": <span class="hljs-value"><span class="hljs-string">"~2.0.0"</span></span>,
        "<span class="hljs-attribute">imagine/imagine</span>": <span class="hljs-value"><span class="hljs-string">"v0.5.0"</span>
    </span>}</span>,

    // クラスのオートロードの仕様
    "<span class="hljs-attribute">autoload</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">psr-4</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">yii\\imagine\\</span>": <span class="hljs-value"><span class="hljs-string">""</span>
        </span>}
    </span>}
</span>}
</code></pre>
<h4>パッケージ名  <span id="package-name"></span><a href="#package-name" class="hashlink">&para;</a></h4><p>全ての Composer パッケージは、他の全てパッケージと異なる一意に特定できる名前を持たなければなりません。
パッケージ名の形式は <code>vendorName/projectName</code> です。
例えば、<code>yiisoft/yii2-imagine</code> というパッケージ名の中では、ベンダー名とプロジェクト名は、それぞれ、<code>yiisoft</code> と <code>yii2-imagine</code> です。</p>
<p>ベンダー名として <code>yiisoft</code> を使ってはいけません。これは Yii のコアコードに使うために予約されています。</p>
<p>プロジェクト名には、Yii 2 エクステンションを表す <code>yii2-</code> を前置することを推奨します。例えば、<code>myname/yii2-mywidget</code> です。
このようにすると、ユーザはパッケージが Yii 2 エクステンションであることをより容易に知ることが出来ます。</p>
<h4>パッケージタイプ  <span id="package-type"></span><a href="#package-type" class="hashlink">&para;</a></h4><p>パッケージがインストールされたときに Yii のエクステンションとして認識されるように、エクステンションのパッケージタイプを <code>yii2-extension</code> と指定することは重要なことです。</p>
<p>ユーザが <code>composer install</code> を走らせてエクステンションをインストールすると、<code>vendor/yiisoft/extensions.php</code> というファイルが自動的に更新されて、新しいエクステンションに関する情報を含むようになります。
Yii のアプリケーションは、このファイルによって、どんなエクステンションがインストールされているかを知ることが出来ます
(その情報には、<span class="broken-link">yii\base\Application::extensions</span> を通じてアクセスすることが出来ます)。</p>
<h4>依存パッケージ  <span id="dependencies"></span><a href="#dependencies" class="hashlink">&para;</a></h4><p>あなたのエクステンションは Yii に依存します (当然ですね)。
ですから、<code>composer.json</code> の <code>require</code> エントリのリストにそれ (<code>yiisoft/yii2</code>) を挙げなければなりません。
あなたのエクステンションがその他のエクステンションやサードパーティのライブラリに依存する場合は、それらもリストに挙げなければなりません。
それぞれの依存パッケージについて、適切なバージョン制約 (例えば <code>1.*</code> や <code>@stable</code>) を指定することも忘れてはなりません。
あなたのエクステンションを安定バージョンとしてリリースする場合は、安定した依存パッケージを使ってください。</p>
<p>たいていの JavaScript/CSS パッケージは、Composer ではなく、<a href="http://bower.io/">Bower</a> および/または <a href="https://www.npmjs.org/">NPM</a> を使って管理されています。
Yii は <a href="https://github.com/francoispluchino/composer-asset-plugin">Composer アセットプラグイン</a> を使って、この種のパッケージを Composer によって管理することを可能にしています。
あなたのエクステンションが Bower パッケージに依存している場合でも、次のように、<code>composer.json</code> に依存パッケージをリストアップすることが簡単に出来ます。</p>
<pre><code class="hljs json language-json">{
    // 依存パッケージ
    "<span class="hljs-attribute">require</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">bower-asset/jquery</span>": <span class="hljs-value"><span class="hljs-string">"&gt;=1.11.*"</span>
    </span>}
</span>}
</code></pre>
<p>上記のコードは、エクステンションが <code>jquery</code> Bower パッケージに依存することを述べています。
一般に、<code>composer.json</code> の中でBower パッケージを指すためには <code>bower-asset/PackageName</code> を使うことが出来ます。
そして、NPM パッケージを指すためには <code>npm-asset/PackageName</code> を使うことが出来ます。
Composer が Bower または NPM のパッケージをインストールする場合は、デフォルトでは、それぞれ、<code>@vendor/bower/PackageName</code> および <code>@vendor/npm/Packages</code> というディレクトリの下にパッケージの内容がインストールされます。
この二つのディレクトリは、<code>@bower/PackageName</code> および <code>@npm/PackageName</code> という短いエイリアスを使って参照することも可能です。</p>
<p>アセット管理に関する詳細については、<a href="guide-structure-assets.html#bower-npm-assets">アセット</a> の節を参照してください。</p>
<h4>クラスのオートロード  <span id="class-autoloading"></span><a href="#class-autoloading" class="hashlink">&para;</a></h4><p>エクステンションのクラスが Yii のクラスオートローダまたは Composer のクラスオートローダによってオートロードされるように、下記に示すように、<code>composer.json</code> ファイルの <code>autoload</code> エントリを指定しなければなりません。</p>
<pre><code class="hljs json language-json">{
    // ....

    "<span class="hljs-attribute">autoload</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">psr-4</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">yii\\imagine\\</span>": <span class="hljs-value"><span class="hljs-string">""</span>
        </span>}
    </span>}
</span>}
</code></pre>
<p>一つまたは複数のルート名前空間と、それに対応するファイルパスをリストに挙げることが出来ます。</p>
<p>エクステンションがアプリケーションにインストールされると、Yii は列挙されたルート名前空間の一つ一つに対して、名前空間に対応するディレクトリを指す <a href="guide-concept-aliases.html#extension-aliases">エイリアス</a> を作成します。
例えば、上記の <code>autoload</code> の宣言は、<code>@yii/imagine</code> という名前のエイリアスに対応することになります。</p>
<h3>推奨されるプラクティス  <span id="recommended-practices"></span><a href="#recommended-practices" class="hashlink">&para;</a></h3><p>エクステンションは他の人々によって使われることを意図したものですから、多くの場合、追加の開発努力が必要になります。
以下に、高品質のエクステンションを作成するときによく用いられ、また推奨されるプラクティスのいくつかを紹介します。</p>
<h4>名前空間  <span id="namespaces"></span><a href="#namespaces" class="hashlink">&para;</a></h4><p>名前の衝突を避けて、エクステンションの中のクラスをオートロード可能にするために、名前空間を使うべきであり、エクステンションの中のクラスには <a href="http://www.php-fig.org/psr/psr-4/">PSR-4 標準</a> または <a href="http://www.php-fig.org/psr/psr-0/">PSR-0 標準</a> に従った名前を付けるべきです。</p>
<p>あなたのクラスの名前空間は <code>vendorName\extensionName</code> で始まるべきです。
ここで <code>extensionName</code> は、<code>yii2-</code> という接頭辞を含むべきでないことを除けば、パッケージ名におけるプロジェクト名と同じものです。
例えば、<code>yiisoft/yii2-imagine</code> エクステンションでは、<code>yii\imagine</code> をエクステンションのクラスの名前空間として使っています。</p>
<p><code>yii</code>、<code>yii2</code> または <code>yiisoft</code> をベンダー名として使ってはいけません。これらの名前は、Yii のコアコードに使うために予約されています。</p>
<h4>ブートストラップクラス  <span id="bootstrapping-classes"></span><a href="#bootstrapping-classes" class="hashlink">&para;</a></h4><p>場合によっては、アプリケーションが <a href="guide-runtime-bootstrapping.html">ブートストラップ</a> の段階にある間に、エクステンションに何らかのコードを実行させたい場合があるでしょう。
例えば、エクステンションをアプリケーションの <code>beginRequest</code> イベントに反応させて、何らかの環境設定を調整したいことがあります。
エクステンションのユーザに対して、エクステンションの中にあるイベントハンドラを <code>beginRequest</code> イベントに明示的にアタッチするように指示することも出来ますが、より良い方法は、それを自動的に行うことです。</p>
<p>この目的を達するためには、<span class="broken-link">yii\base\BootstrapInterface</span> を実装する、いわゆる <em>ブートストラップクラス</em> を作成します。
例えば、</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">myname</span>\<span class="hljs-title">mywidget</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">base</span>\<span class="hljs-title">BootstrapInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">base</span>\<span class="hljs-title">Application</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBootstrapClass</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BootstrapInterface</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span><span class="hljs-params">(<span class="hljs-variable">$app</span>)</span>
    </span>{
        <span class="hljs-variable">$app</span>-&gt;on(Application::EVENT_BEFORE_REQUEST, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
             <span class="hljs-comment">// ここで何かをする</span>
        });
    }
}
</code></pre>
<p>そして、次のように、このクラスを <code>composer.json</code> ファイルのリストに挙げます。</p>
<pre><code class="hljs json language-json">{
    // ...

    "<span class="hljs-attribute">extra</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">bootstrap</span>": <span class="hljs-value"><span class="hljs-string">"myname\\mywidget\\MyBootstrapClass"</span>
    </span>}
</span>}
</code></pre>
<p>このエクステンションがアプリケーションにインストールされると、すべてのリクエストのブートストラップの過程において、毎回、Yii が自動的にブートストラップクラスのインスタンスを作成し、その <span class="broken-link">yii\base\BootstrapInterface::bootstrap()</span> メソッドを呼びます。</p>
<h4>データベースを扱う  <span id="working-with-databases"></span><a href="#working-with-databases" class="hashlink">&para;</a></h4><p>あなたのエクステンションはデータベースにアクセスする必要があるかも知れません。
エクステンションを使うアプリケーションが常に <code>Yii::$db</code> を DB 接続として使用すると仮定してはいけません。
その代りに、DB アクセスを必要とするクラスのために <code>db</code> プロパティを宣言すべきです。
このプロパティによって、エクステンションのユーザは、エクステンションにどの DB 接続を使わせるかをカスタマイズすることが出来るようになります。
その一例として、<span class="broken-link">yii\caching\DbCache</span> クラスを参照して、それがどのように <code>db</code> プロパティを宣言して使っているかを見ることが出来ます。</p>
<p>あなたのエクステンションが特定の DB テーブルを作成したり、DB スキーマを変更したりする必要がある場合は、次のようにするべきです。</p>
<ul>
<li>DB スキーマを操作するために、平文の SQL ファイルを使うのではなく、<a href="guide-db-migrations.html">マイグレーション</a> を提供する。</li>
<li>マイグレーションがさまざまな DBMS に適用可能なものになるように試みる。</li>
<li>マイグレーションの中では <a href="guide-db-active-record.html">アクティブレコード</a> の使用を避ける。</li>
</ul>
<h4>アセットを使う  <span id="using-assets"></span><a href="#using-assets" class="hashlink">&para;</a></h4><p>あなたのエクステンションがウィジェットかモジュールである場合は、動作するために何らかの <a href="guide-structure-assets.html">アセット</a> が必要である可能性が高いでしょう。
例えば、モジュールは、画像、JavaScript、そして CSS を含むページを表示することがあるでしょう。
アプリケーションにインストールされるときに、エクステンションの全てのファイルは同じディレクトリの下に配置されますが、そのディレクトリはウェブからはアクセス出来ないものです。
そのため、次のどちらかの方法を使って、アセットファイルをウェブから直接アクセス出来るようにしなければなりません。</p>
<ul>
<li>アセットファイルをウェブからアクセス出来る特定のフォルダに手作業でコピーするように、エクステンションのユーザに要求する。</li>
<li><a href="guide-structure-assets.html">アセットバンドル</a> を宣言し、アセット発行メカニズムに頼って、アセットバンドルにリストされているファイルをウェブからアクセス出来るフォルダに自動的にコピーする。</li>
</ul>
<p>あなたのエクステンションが他の人々にとって一層使いやすいものになるように、第二の方法をとることを推奨します。
アセットの取り扱い一般に関する詳細は <a href="guide-structure-assets.html">アセット</a> の節を参照してください。</p>
<h4>国際化と地域化  <span id="i18n-l10n"></span><a href="#i18n-l10n" class="hashlink">&para;</a></h4><p>あなたのエクステンションは、さまざまな言語をサポートするアプリケーションによって使われるかもしれません。
従って、あなたのエクステンションがエンドユーザにコンテントを表示するものである場合は、それを <a href="guide-tutorial-i18n.html">国際化</a> するように努めるべきです。
具体的には、</p>
<ul>
<li>エクステンションがエンドユーザに向けたメッセージを表示する場合は、翻訳することが出来るようにメッセージを <code>Yii::t()</code> で囲むべきです。
開発者に向けられたメッセージ (内部的な例外のメッセージなど) は翻訳される必要はありません。</li>
<li>エクステンションが数値や日付などを表示する場合は、<span class="broken-link">yii\i18n\Formatter</span> を適切な書式化の規則とともに使って書式設定すべきです。</li>
</ul>
<p>詳細については、<a href="guide-tutorial-i18n.html">国際化</a> の節を参照してください。</p>
<h4>テスト  <span id="testing"></span><a href="#testing" class="hashlink">&para;</a></h4><p>あなたは、あなたのエクステンションが他の人々に問題をもたらすことなく完璧に動作することを望むでしょう。
この目的を達するためには、あなたのエクステンションを公開する前にテストすべきです。</p>
<p>手作業のテストに頼るのではなく、あなたのエクステンションのコードをカバーするさまざまなテストケースを作成することが推奨されます。
あなたのエクステンションの新しいバージョンを公開する前には、毎回、それらのテストケースを走らせるだけで、全てが良い状態にあることを確認することが出来ます。
Yii はテストのサポートを提供しており、それよって、単体テスト、機能テスト、承認テストを書くことが一層簡単に出来るようになっています。
詳細については、<a href="guide-test-overview.html">テスト</a> の節を参照してください。</p>
<h4>バージョン管理  <span id="versioning"></span><a href="#versioning" class="hashlink">&para;</a></h4><p>エクステンションのリリースごとにバージョン番号 (例えば <code>1.0.1</code>) を付けるべきです。
どのようなバージョン番号を付けるべきかを決定するときは、<a href="http://semver.org">セマンティックバージョニング</a> のプラクティスに従うことを推奨します。</p>
<h4>リリース(公開)  <span id="releasing"></span><a href="#releasing" class="hashlink">&para;</a></h4><p>他の人々にあなたのエクステンションを知ってもらうためには、それをリリース(公開)する必要があります。</p>
<p>エクステンションをリリースするのが初めての場合は、<a href="https://packagist.org/">Packagist</a> などの Composer レポジトリにエクステンションを登録するべきです。
その後は、あなたがしなければならない仕事は、エクステンションの VCS レポジトリでリリースタグ (例えば <code>v1.0.1</code>) を作成することと、Composer レポジトリに新しいリリースについて通知するだけのことになります。
そうすれば、人々が新しいリリースを見出すことが出来るようになり、Composer レポジトリを通じてエクステンションをインストールしたりアップデートしたりするようになります。</p>
<p>エクステンションのリリースには、コードファイル以外に、人々があなたのエクステンションについて知ったり、エクステンションを使ったりするのを助けるために、下記のものを含めることを考慮すべきです。</p>
<ul>
<li>パッケージのルートディレクトリに readme ファイル: あなたのエクステンションが何をするものか、そして、どのようにインストールして使うものかを説明するものです。
<a href="http://daringfireball.net/projects/markdown/">Markdown</a> 形式で書いて、<code>readme.md</code> という名前にすることを推奨します。</li>
<li>パッケージのルートディレクトリに changelog ファイル: それぞれのリリースで何が変ったかを一覧表示するものです。
このファイルは Markdown 形式で書いて <code>changelog.md</code> と名付けることが出来ます。</li>
<li>パッケージのルートディレクトリに upgrade ファイル: エクステンションの古いリリースからのアップグレード方法について説明するものです。
このファイルは Markdown 形式で書いて <code>upgrade.md</code> と名付けることが出来ます。</li>
<li>チュートリアル、デモ、スクリーンショットなど: あなたのエクステンションが readme ファイルでは十分にカバーできないほど多くの機能を提供するものである場合は、これらが必要になります。</li>
<li>API ドキュメント: あなたのコードは、他の人々が読んで理解することがより一層容易に出来るように、十分な解説を含むべきです。
<a href="https://github.com/yiisoft/yii2/blob/master/framework/base/Object.php">Object のクラスファイル</a> を参照すると、コードに解説を加える方法を学ぶことが出来ます。</li>
</ul>
<blockquote class="info"><p><strong>Info: </strong>コードのコメントを Markdown 形式で書くことが出来ます。
  <code>yiisoft/yii2-apidoc</code> エクステンションが、コードのコメントに基づいて綺麗な API ドキュメントを生成するツールを提供しています。</p>
</blockquote>
<blockquote class="info"><p><strong>Info: </strong>これは要求ではありませんが、あなたのエクステンションも一定のコーディングスタイルを守るのが良いと思います。
  <a href="https://github.com/yiisoft/yii2/wiki/Core-framework-code-style">コアフレームワークコードスタイル</a> を参照してください。</p>
</blockquote>
<h2>コアエクステンション  <span id="core-extensions"></span><a href="#core-extensions" class="hashlink">&para;</a></h2><p>Yii は下記のコアエクステンションを提供しています。これらは Yii 開発チームによって開発され保守されているものです。
全て <a href="https://packagist.org/">Packagist</a> に登録され、<a href="#using-extensions">エクステンションを使う</a> の項で説明したように、簡単にインストールすることが出来ます。</p>
<ul>
<li><a href="https://github.com/yiisoft/yii2-apidoc">yiisoft/yii2-apidoc</a>:
拡張可能で高性能な API ドキュメント生成機能を提供します。コアフレームワークの API ドキュメントを生成するためにも使われています。</li>
<li><a href="https://github.com/yiisoft/yii2-authclient">yiisoft/yii2-authclient</a>:
Facebook OAuth2 クライアント、GitHub OAuth2 クライアントなど、よく使われる一連の auth クライアントを提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-bootstrap">yiisoft/yii2-bootstrap</a>:
<a href="http://getbootstrap.com/">Bootstrap</a> のコンポーネントとプラグインをカプセル化した一連のウィジェットを提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-codeception">yiisoft/yii2-codeception</a>:
<a href="http://codeception.com/">Codeception</a> に基づくテストのサポートを提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-debug">yiisoft/yii2-debug</a>:
Yii アプリケーションのデバッグのサポートを提供します。
このエクステンションが使われると、全てのページの末尾にデバッガツールバーが表示されます。
このエクステンションは、より詳細なデバッグ情報を表示する一連のスタンドアロンページも提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-elasticsearch">yiisoft/yii2-elasticsearch</a>:
<a href="http://www.elasticsearch.org/">Elasticsearch</a> の使用に対するサポートを提供します。
基本的なクエリ/サーチのサポートを含むだけでなく、Elasticsearch にアクティブレコードを保存することを可能にする <a href="guide-db-active-record.html">アクティブレコード</a> パターンをも実装しています。</li>
<li><a href="https://github.com/yiisoft/yii2-faker">yiisoft/yii2-faker</a>:
ダミーデータを作る <a href="https://github.com/fzaninotto/Faker">Faker</a> を使うためのサポートを提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-gii">yiisoft/yii2-gii</a>:
拡張性が非常に高いウェブベースのコードジェネレータを提供します。これを使って、モデル、フォーム、モジュール、CRUD などを迅速に生成することが出来ます。</li>
<li><a href="https://github.com/yiisoft/yii2-httpclient">yiisoft/yii2-httpclient</a>:
provides an HTTP client.</li>
<li><a href="https://github.com/yiisoft/yii2-imagine">yiisoft/yii2-imagine</a>:
<a href="http://imagine.readthedocs.org/">Imagine</a> に基づいて、使われることの多い画像操作機能を提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-jui">yiisoft/yii2-jui</a>:
<a href="http://jqueryui.com/">JQuery UI</a> のインタラクションとウィジェットをカプセル化した一連のウィジェットを提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-mongodb">yiisoft/yii2-mongodb</a>:
<a href="http://www.mongodb.org/">MongoDB</a> の使用に対するサポートを提供します。
基本的なクエリ、アクティブレコード、マイグレーション、キャッシュ、コード生成などの機能を含みます。</li>
<li><a href="https://github.com/yiisoft/yii2-redis">yiisoft/yii2-redis</a>:
<a href="http://redis.io/">redis</a> の使用に対するサポートを提供します。
基本的なクエリ、アクティブレコード、キャッシュなどの機能を含みます。</li>
<li><a href="https://github.com/yiisoft/yii2-smarty">yiisoft/yii2-smarty</a>:
<a href="http://www.smarty.net/">Smarty</a> に基づいたテンプレートエンジンを提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-sphinx">yiisoft/yii2-sphinx</a>:
<a href="http://sphinxsearch.com">Sphinx</a> の使用に対するサポートを提供します。
基本的なクエリ、アクティブレコード、コード生成などの機能を含みます。</li>
<li><a href="https://github.com/yiisoft/yii2-swiftmailer">yiisoft/yii2-swiftmailer</a>:
<a href="http://swiftmailer.org/">swiftmailer</a> に基づいたメール送信機能を提供します。</li>
<li><a href="https://github.com/yiisoft/yii2-twig">yiisoft/yii2-twig</a>:
<a href="http://twig.sensiolabs.org/">Twig</a> に基づいたテンプレートエンジンを提供します。</li>
</ul>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Tue, 27 Dec 2016 22:28:43 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
