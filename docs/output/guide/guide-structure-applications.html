<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/90d046f2/css/bootstrap.css" rel="stylesheet">
<link href="./assets/c6368d94/solarized_light.css" rel="stylesheet">
<link href="./assets/9f5cdd92/style.css" rel="stylesheet">
<script src="./assets/a6e53573/jquery.js"></script>
<script src="./assets/90d046f2/js/bootstrap.js"></script>
<script src="./assets/218ce2e5/jssearch.js"></script>    <title>Ứng dụng (Applications) - Kiến trúc ứng dụng (Application Structure) - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w11302" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w11302-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">The Definitive Guide to Yii 2.0</a></div><div id="w11302-collapse" class="collapse navbar-collapse"><ul id="w11303" class="navbar-nav nav"><li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-11286" data-toggle="collapse" data-parent="#navigation">Giới thiệu <b class="caret"></b></a><div id="navigation-11286" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">Về Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Nâng cấp lên từ phiên bản 1.1</a></div>
<a class="list-group-item" href="#navigation-11287" data-toggle="collapse" data-parent="#navigation">Bắt đầu <b class="caret"></b></a><div id="navigation-11287" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Cài đặt Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Thực hiện chạy ứng dụng</a>
<a class="list-group-item" href="./guide-start-hello.html">Viết lời chào đầu tiên</a>
<a class="list-group-item" href="./guide-start-forms.html">Làm việc với Forms</a>
<a class="list-group-item" href="./guide-start-databases.html">Làm việc với Databases</a>
<a class="list-group-item" href="./guide-start-gii.html">Sử dụng Gii để sinh code</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Mức cao hơn</a></div>
<a class="list-group-item active" href="#navigation-11288" data-toggle="collapse" data-parent="#navigation">Kiến trúc ứng dụng (Application Structure) <b class="caret"></b></a><div id="navigation-11288" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-structure-overview.html">Tổng quan về kiến trúc ứng dụng</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Mục Scripts</a>
<a class="list-group-item active" href="./guide-structure-applications.html">Ứng dụng (Applications)</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Thành phần ứng dụng</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Bộ điều khiển (Controllers)</a>
<a class="list-group-item" href="./guide-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-structure-filters.html">Bộ lọc (Filters)</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-structure-assets.html">Assets</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Phần mở rộng (Extensions)</a></div>
<a class="list-group-item" href="#navigation-11289" data-toggle="collapse" data-parent="#navigation">Yêu cầu xử lý (Handling Requests) <b class="caret"></b></a><div id="navigation-11289" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Routing và URL Creation</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Yêu cầu (Requests)</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Responses</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sessions và Cookies</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Xử lý lỗi (Handling Error)</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Logging</a></div>
<a class="list-group-item" href="#navigation-11290" data-toggle="collapse" data-parent="#navigation">Các khái niệm chính <b class="caret"></b></a><div id="navigation-11290" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">Thành phần (Components)</a>
<a class="list-group-item" href="./guide-concept-properties.html">Thuộc tính (Properties)</a>
<a class="list-group-item" href="./guide-concept-events.html">Sự kiện (Events)</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Hành vi (Behaviors)</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Cấu hình (Configurations)</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Bí danh (Aliases)</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Lớp tự động nạp (Autoloading)</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-11291" data-toggle="collapse" data-parent="#navigation">Làm việc với Databases <b class="caret"></b></a><div id="navigation-11291" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Data Access Objects</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Query Builder</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Migrations</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elasticsearch.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-11292" data-toggle="collapse" data-parent="#navigation">Nhận dữ liệu từ user <b class="caret"></b></a><div id="navigation-11292" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Tạo mới Forms</a>
<a class="list-group-item" href="./guide-input-validation.html">Kiểm tra dữ liệu đầu vào (Validating Input)</a>
<a class="list-group-item" href="./guide-input-file-upload.html">File Upload</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Thu thập dữ liệu từ danh sách đầu vào (Đang phát triển)</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Lấy dữ liệu cho nhiều Models (Chưa giải quyết)</a></div>
<a class="list-group-item" href="#navigation-11293" data-toggle="collapse" data-parent="#navigation">Hiển thị dữ liệu <b class="caret"></b></a><div id="navigation-11293" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatter.html">Định dạng dữ liệu (Data Formatting)</a>
<a class="list-group-item" href="./guide-output-pagination.html">Phân trang (Pagination)</a>
<a class="list-group-item" href="./guide-output-sorting.html">Sắp xếp (Sorting)</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Cung cấp dữ liệu ra (Data Providers)</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Dữ liệu Widgets</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">làm việc với Client Scripts</a>
<a class="list-group-item" href="./guide-output-theming.html">Giao diện (Theming)</a></div>
<a class="list-group-item" href="#navigation-11294" data-toggle="collapse" data-parent="#navigation">Bảo mật (Security) <b class="caret"></b></a><div id="navigation-11294" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">Xác thực (Authentication)</a>
<a class="list-group-item" href="./guide-security-authorization.html">Quyền (Authorization)</a>
<a class="list-group-item" href="./guide-security-passwords.html">Các thao tác xử lý với Passwords (Đang phát triển)</a>
<a class="list-group-item" href="./guide-security-auth-clients.html">Auth Clients</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Best Practices</a></div>
<a class="list-group-item" href="#navigation-11295" data-toggle="collapse" data-parent="#navigation">Bộ nhớ Cache <b class="caret"></b></a><div id="navigation-11295" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-caching-data.html">Cache dữ liệu</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP Caching</a></div>
<a class="list-group-item" href="#navigation-11296" data-toggle="collapse" data-parent="#navigation">RESTful Web Services <b class="caret"></b></a><div id="navigation-11296" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Bắt đầu</a>
<a class="list-group-item" href="./guide-rest-resources.html">Tài nguyên (Resources)</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Bộ điều khiển (Controllers)</a>
<a class="list-group-item" href="./guide-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Định dạng thông điệp gửi đi (Response Formatting)</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Xác thực (Authentication)</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Phiên bản (Version)</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Error Handling</a></div>
<a class="list-group-item" href="#navigation-11297" data-toggle="collapse" data-parent="#navigation">Công cụ phát triển (Development Tools) <b class="caret"></b></a><div id="navigation-11297" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tool-debugger.html">Thanh công cụ gỡ lỗi và sửa lỗi (Debug Toolbar và Debugger)</a>
<a class="list-group-item" href="./guide-tool-gii.html">Sử dụng Gii để tạo code</a>
<a class="list-group-item" href="./guide-tool-api-doc.html">Tạo tài liệu về API </a></div>
<a class="list-group-item" href="#navigation-11298" data-toggle="collapse" data-parent="#navigation">Testing <b class="caret"></b></a><div id="navigation-11298" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Thiết lập môi trường</a>
<a class="list-group-item" href="./guide-test-unit.html">Unit Tests</a>
<a class="list-group-item" href="./guide-test-functional.html">Kiểm tra chức năng (Functional Tests)</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Acceptance Tests</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a></div>
<a class="list-group-item" href="#navigation-11299" data-toggle="collapse" data-parent="#navigation">Chủ đề năng cao <b class="caret"></b></a><div id="navigation-11299" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">Advanced Application Template</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Building Application from Scratch</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Giao diện dòng lệnh (Console Commands)</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Quốc tế hóa (Internationalization)</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Thư (Mailing)</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Tối ưu hiệu năng ứng dụng (Performance Tuning)</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Shared Hosting Environment</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Template Engines</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Working with Third-Party Code</a></div>
<a class="list-group-item" href="#navigation-11300" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-11300" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap Widgets</a>
<a class="list-group-item" href="./guide-widget-jui.html">jQuery UI Widgets</a></div>
<a class="list-group-item" href="#navigation-11301" data-toggle="collapse" data-parent="#navigation">Helpers <b class="caret"></b></a><div id="navigation-11301" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Tổng quan</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>アプリケーション <span id="apurikeshon"></span><a href="#apurikeshon" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#application-configurations">アプリケーションの構成情報</a></li>
<li><a href="#application-properties">アプリケーションのプロパティ</a></li>
<li><a href="#application-events">アプリケーションのイベント</a></li>
<li><a href="#application-lifecycle">アプリケーションのライフサイクル</a></li></ol></div>
<p>アプリケーションは Yii アプリケーションシステム全体の構造とライフサイクルを統制するオブジェクトです。
全ての Yii アプリケーションシステムは、それぞれ、単一のアプリケーションオブジェクトを持ちます。
アプリケーションオブジェクトは、<a href="guide-structure-entry-scripts.html">エントリスクリプト</a> において作成され、<code>\Yii::$app</code> という式でグローバルにアクセスすることが出来るオブジェクトです。</p>
<blockquote class="info"><p><strong>Info: </strong>ガイドの中で「アプリケーション」という言葉は、文脈に応じて、アプリケーションオブジェクトを意味したり、アプリケーションシステムを意味したりします。</p>
</blockquote>
<p>二種類のアプリケーション、すなわち、<span class="broken-link">yii\web\Application</span> と <span class="broken-link">yii\console\Application</span> があります。
名前が示すように、前者は主にウェブのリクエストを処理し、後者はコンソールコマンドのリクエストを処理します。</p>
<h2>アプリケーションの構成情報  <span id="application-configurations"></span><a href="#application-configurations" class="hashlink">&para;</a></h2><p><a href="guide-structure-entry-scripts.html">エントリスクリプト</a> は、アプリケーションを作成するときに、下記のように、<a href="guide-concept-configurations.html">構成情報</a> を読み込んで、それをアプリケーションに適用します。</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">require</span>(<span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/../vendor/autoload.php'</span>);
<span class="hljs-keyword">require</span>(<span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/../vendor/yiisoft/yii2/Yii.php'</span>);

<span class="hljs-comment">// アプリケーションの構成情報を読み込む</span>
<span class="hljs-variable">$config</span> = <span class="hljs-keyword">require</span>(<span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/../config/web.php'</span>);

<span class="hljs-comment">// アプリケーションのインスタンスを作成し、構成情報を適用する</span>
(<span class="hljs-keyword">new</span> yii\web\Application(<span class="hljs-variable">$config</span>))-&gt;run();
</code></pre>
<p>通常の <a href="guide-concept-configurations.html">構成情報</a> と同じように、アプリケーションの構成情報は、アプリケーションオブジェクトのプロパティをどのように初期化するかを指定するものです。
アプリケーションの構成情報は、たいていは非常に複雑なものですから、通常は、上記の例の <code>web.php</code> ファイルのように、<a href="guide-concept-configurations.html#configuration-files">構成情報ファイル</a> に保管されます。</p>
<h2>アプリケーションのプロパティ  <span id="application-properties"></span><a href="#application-properties" class="hashlink">&para;</a></h2><p>アプリケーションの構成情報で構成すべき重要なアプリケーションのプロパティは数多くあります。
それらのプロパティの典型的なものは、アプリケーションが走る環境を記述するものです。
例えば、アプリケーションは、どのようにして <a href="guide-structure-controllers.html">コントローラ</a> をロードするか、また、どこにテンポラリファイルを保存するかなどを知らなければなりません。
以下において、それらのプロパティを要約します。</p>
<h3>必須のプロパティ  <span id="required-properties"></span><a href="#required-properties" class="hashlink">&para;</a></h3><p>どのアプリケーションでも、最低二つのプロパティは構成しなければなりません。
すなわち、<span class="broken-link">yii\base\Application::id</span> と <span class="broken-link">yii\base\Application::basePath</span> です。</p>
<h4><span class="broken-link">yii\base\Application::id</span>  <span id="id"></span><a href="#id" class="hashlink">&para;</a></h4><p><span class="broken-link">yii\base\Application::id</span> プロパティは、アプリケーションを他のアプリケーションから区別するユニークな ID を指定するものです。
このプロパティは主としてプログラム内部で使われます。
必須ではありませんが、最良の相互運用性を確保するために、アプリケーション ID を指定するときには英数字だけを使うことが推奨されます。</p>
<h4><span class="broken-link">yii\base\Application::basePath</span>  <span id="basePath"></span><a href="#basePath" class="hashlink">&para;</a></h4><p><span class="broken-link">yii\base\Application::basePath</span> プロパティは、アプリケーションのルートディレクトリを指定するものです。
これは、アプリケーションシステムの全ての保護されたソースコードを収容するディレクトリです。
通常、このディレクトリの下に、MVC パターンに対応するソースコードを収容した <code>models</code>、<code>views</code>、<code>controllers</code> などのサブディレクトリがあります。</p>
<p><span class="broken-link">yii\base\Application::basePath</span> プロパティの構成には、ディレクトリパスを使っても、<a href="guide-concept-aliases.html">パスエイリアス</a> を使っても構いません。
どちらの形式においても、対応するディレクトリが存在しなければなりません。
さもなくば、例外が投げられます。
パスは <code>realpath()</code> 関数を呼び出して正規化されます。</p>
<p><span class="broken-link">yii\base\Application::basePath</span> プロパティは、しばしば、他の重要なパス (例えば、runtime のパス) を派生させるために使われます。
このため、<code>basePath</code> を示す <code>@app</code> というパスエイリアスが、あらかじめ定義されています。
その結果、派生的なパスはこのエイリアスを使って形成することが出来ます
(例えば、runtime ディレクトリを示す <code>@app/runtime</code> など)。</p>
<h3>重要なプロパティ <span id="important-properties"></span><a href="#important-properties" class="hashlink">&para;</a></h3><p>この項で説明するプロパティは、アプリケーションごとに異なってくるものであるため、たいてい、構成する必要が生じます。</p>
<h4><span class="broken-link">yii\base\Application::aliases</span>  <span id="aliases"></span><a href="#aliases" class="hashlink">&para;</a></h4><p>このプロパティを使って、配列形式で一連の <a href="guide-concept-aliases.html">エイリアス</a> を定義することが出来ます。
配列のキーがエイリアスの名前であり、配列の値が対応するパスの定義です。
例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'aliases'</span> =&gt; [
        <span class="hljs-string">'@name1'</span> =&gt; <span class="hljs-string">'path/to/path1'</span>,
        <span class="hljs-string">'@name2'</span> =&gt; <span class="hljs-string">'path/to/path2'</span>,
    ],
]
</code></pre>
<p>このプロパティが提供されているのは、<span class="broken-link">Yii::setAlias()</span> メソッドを呼び出す代りに、アプリケーションの構成情報を使ってエイリアスを定義することが出来るようにするためです。</p>
<h4><span class="broken-link">yii\base\Application::bootstrap</span>  <span id="bootstrap"></span><a href="#bootstrap" class="hashlink">&para;</a></h4><p>これは非常に有用なプロパティです。
これによって、アプリケーションの <span class="broken-link">yii\base\Application::bootstrap()</span> において走らせるべきコンポーネントを配列として指定することが出来ます。
例えば、ある <a href="guide-structure-modules.html">モジュール</a> に <a href="guide-runtime-routing.html">URL 規則</a> をカスタマイズさせたいときに、モジュールの ID をこのプロパティの要素として挙げることが出来ます。</p>
<p>このプロパティにリストする各コンポーネントは、以下の形式のいずれかによって指定することが出来ます。</p>
<ul>
<li><a href="#components">components</a> によって指定されているアプリケーションコンポーネントの ID</li>
<li><a href="#modules">modules</a> によって指定されているモジュールの ID</li>
<li>クラス名</li>
<li>構成情報の配列</li>
<li>コンポーネントを作成して返す無名関数</li>
</ul>
<p>例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'bootstrap'</span> =&gt; [
        <span class="hljs-comment">// アプリケーションコンポーネント ID、または、モジュール ID</span>
        <span class="hljs-string">'demo'</span>,

        <span class="hljs-comment">// クラス名</span>
        <span class="hljs-string">'app\components\Profiler'</span>,

        <span class="hljs-comment">// 構成情報の配列</span>
        [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'app\components\Profiler'</span>,
            <span class="hljs-string">'level'</span> =&gt; <span class="hljs-number">3</span>,
        ],

        <span class="hljs-comment">// 無名関数</span>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> app\components\Profiler();
        }
    ],
]
</code></pre>
<blockquote class="info"><p><strong>Info: </strong>モジュール ID と同じ ID のアプリケーションコンポーネントがある場合は、ブートストラップの過程ではアプリケーションコンポーネントが使われます。
 代りにモジュールを使いたいときは、次のように、無名関数を使って指定することが出来ます。
<code>`</code>php
[</p>
<pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> Yii::<span class="hljs-variable">$app</span>-&gt;getModule(<span class="hljs-string">'user'</span>);
},
</code></pre>
<p>]
<code>`</code></p>
</blockquote>
<p>ブートストラップの過程で、各コンポーネントのインスタンスが作成されます。
そして、コンポーネントクラスが <span class="broken-link">yii\base\BootstrapInterface</span> を実装している場合は、その <span class="broken-link">yii\base\BootstrapInterface::bootstrap()</span> メソッドも呼び出されます。</p>
<p>もう一つの実用的な例が <a href="guide-start-installation.html">ベーシックプロジェクトテンプレート</a> のアプリケーションの構成情報の中にあります。
そこでは、アプリケーションが開発環境で走るときには <code>debug</code> モジュールと <code>gii</code> モジュールがブートストラップコンポーネントとして構成されています。</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">if</span> (YII_ENV_DEV) {
    <span class="hljs-comment">// 'dev' 環境のための構成情報の修正</span>
    <span class="hljs-variable">$config</span>[<span class="hljs-string">'bootstrap'</span>][] = <span class="hljs-string">'debug'</span>;
    <span class="hljs-variable">$config</span>[<span class="hljs-string">'modules'</span>][<span class="hljs-string">'debug'</span>] = <span class="hljs-string">'yii\debug\Module'</span>;

    <span class="hljs-variable">$config</span>[<span class="hljs-string">'bootstrap'</span>][] = <span class="hljs-string">'gii'</span>;
    <span class="hljs-variable">$config</span>[<span class="hljs-string">'modules'</span>][<span class="hljs-string">'gii'</span>] = <span class="hljs-string">'yii\gii\Module'</span>;
}
</code></pre>
<blockquote class="note"><p><strong>Note: </strong>あまり多くのコンポーネントを <code>bootstrap</code> に置くと、アプリケーションのパフォーマンスを劣化させます。
  なぜなら、リクエストごとに同じ一連のコンポーネントを走らせなければならないからです。
  ですから、ブートストラップコンポーネントは賢く使ってください。</p>
</blockquote>
<h4><span class="broken-link">yii\web\Application::catchAll</span>  <span id="catchAll"></span><a href="#catchAll" class="hashlink">&para;</a></h4><p>このプロパティは <span class="broken-link">yii\web\Application</span> においてのみサポートされます。
これは、全てのユーザリクエストを処理すべき <a href="guide-structure-controllers.html">コントローラアクション</a> を指定するものです。
これは主としてアプリケーションがメンテナンスモードにあって、入ってくる全てのリクエストを単一のアクションで処理する必要があるときに使われます。</p>
<p>構成情報は配列の形を取り、最初の要素はアクションのルートを指定します。
そして、配列の残りの要素 (キー・値のペア) は、アクションに渡されるパラメータを指定します。
例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'catchAll'</span> =&gt; [
        <span class="hljs-string">'offline/notice'</span>,
        <span class="hljs-string">'param1'</span> =&gt; <span class="hljs-string">'value1'</span>,
        <span class="hljs-string">'param2'</span> =&gt; <span class="hljs-string">'value2'</span>,
    ],
]
</code></pre>
<blockquote class="info"><p><strong>Info: </strong>このプロパティを有効にすると、開発環境でデバッグパネルが動作しなくなります。</p>
</blockquote>
<h4><span class="broken-link">yii\base\Application::components</span>  <span id="components"></span><a href="#components" class="hashlink">&para;</a></h4><p>これこそが、唯一の最も重要なプロパティです。
これによって、<a href="guide-structure-application-components.html">アプリケーションコンポーネント</a> と呼ばれる一連の名前付きのコンポーネントを登録して、それらを他の場所で使うことが出来るようになります。
例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'components'</span> =&gt; [
        <span class="hljs-string">'cache'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\caching\FileCache'</span>,
        ],
        <span class="hljs-string">'user'</span> =&gt; [
            <span class="hljs-string">'identityClass'</span> =&gt; <span class="hljs-string">'app\models\User'</span>,
            <span class="hljs-string">'enableAutoLogin'</span> =&gt; <span class="hljs-keyword">true</span>,
        ],
    ],
]
</code></pre>
<p>全てのアプリケーションコンポーネントは、それぞれ、配列の中で「キー・値」のペアとして指定されます。
キーはコンポーネントの ID を示し、値はコンポーネントのクラス名または <a href="guide-concept-configurations.html">構成情報</a> を示します。</p>
<p>どのようなコンポーネントでもアプリケーションに登録することが出来ます。
そして登録されたコンポーネントは、後で、<code>\Yii::$app-&gt;componentID</code> という式を使ってグローバルにアクセスすることが出来ます。</p>
<p>詳細は <a href="guide-structure-application-components.html">アプリケーションコンポーネント</a> の節を読んでください。</p>
<h4><span class="broken-link">yii\base\Application::controllerMap</span>  <span id="controllerMap"></span><a href="#controllerMap" class="hashlink">&para;</a></h4><p>このプロパティは、コントローラ ID を任意のコントローラクラスに割り付けることを可能にするものです。
デフォルトでは、Yii は <a href="#controllerNamespace">規約</a> に基づいてコントローラ ID をコントローラクラスに割り付けます
(例えば、<code>post</code> という ID は <code>app\controllers\PostController</code> に割り付けられます)。
このプロパティを構成することによって、特定のコントローラに対する規約を破ることが出来ます。
下記の例では、<code>account</code> は <code>app\controllers\UserController</code> に割り付けられ、<code>article</code> は <code>app\controllers\PostController</code> に割り付けられることになります。</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'controllerMap'</span> =&gt; [
        <span class="hljs-string">'account'</span> =&gt; <span class="hljs-string">'app\controllers\UserController'</span>,
        <span class="hljs-string">'article'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'app\controllers\PostController'</span>,
            <span class="hljs-string">'enableCsrfValidation'</span> =&gt; <span class="hljs-keyword">false</span>,
        ],
    ],
]
</code></pre>
<p>このプロパティの配列のキーはコントローラ ID を表し、配列の値は対応するコントローラクラスの名前または <a href="guide-concept-configurations.html">構成情報</a> を表します。</p>
<h4><span class="broken-link">yii\base\Application::controllerNamespace</span>  <span id="controllerNamespace"></span><a href="#controllerNamespace" class="hashlink">&para;</a></h4><p>このプロパティは、コントローラクラスが配置されるべきデフォルトの名前空間を指定するものです。
デフォルト値は <code>app\controllers</code> です。
コントローラ ID が <code>post</code> である場合、規約によって対応するコントローラの (名前空間を略した) クラス名は <code>PostController</code> となり、完全修飾クラス名は <code>app\controllers\PostController</code> となります。</p>
<p>コントローラクラスは、この名前空間に対応するディレクトリのサブディレクトリに配置されても構いません。
例えば、コントローラ ID として <code>admin/post</code> を仮定すると、対応するコントローラの完全修飾クラス名は <code>app\controllers\admin\PostController</code> となります。</p>
<p>重要なことは、完全修飾されたコントローラクラスが <a href="guide-concept-autoloading.html">オートロード可能</a> でなければならず、コントローラクラスの実際の名前空間がこのプロパティと合致していなければならない、ということです。
そうでないと、アプリケーションにアクセスしたときに "ページがみつかりません" というエラーを受け取ることになります。</p>
<p>上で説明された規約を破りたい場合は、<a href="#controllerMap">controllerMap</a> プロパティを構成することが出来ます。</p>
<h4><span class="broken-link">yii\base\Application::language</span>  <span id="language"></span><a href="#language" class="hashlink">&para;</a></h4><p>このプロパティは、アプリケーションがコンテントをエンドユーザに表示するときに使うべき言語を指定するものです。
このプロパティのデフォルト値は <code>en</code> であり、英語を意味します。
アプリケーションが多言語をサポートする必要があるときは、このプロパティを構成しなければなりません。</p>
<p>このプロパティの値が、メッセージの翻訳、日付の書式、数字の書式などを含む <a href="guide-tutorial-i18n.html">国際化</a> のさまざまな側面を決定します。
例えば、<span class="broken-link">yii\jui\DatePicker</span> ウィジェットは、どの言語でカレンダーを表示すべきか、そして日付をどのように書式設定すべきかを、デフォルトでは、このプロパティを使用して決定します。</p>
<p>言語を指定するのには、<a href="http://ja.wikipedia.org/wiki/IETF%E8%A8%80%E8%AA%9E%E3%82%BF%E3%82%B0">IETF 言語タグ</a> に従うことが推奨されます。
例えば、<code>en</code> は英語を意味し、<code>en-US</code> はアメリカ合衆国の英語を意味します。</p>
<p>このプロパティに関する詳細は <a href="guide-tutorial-i18n.html">国際化</a> の節で読むことが出来ます。</p>
<h4><span class="broken-link">yii\base\Application::modules</span>  <span id="modules"></span><a href="#modules" class="hashlink">&para;</a></h4><p>このプロパティはアプリケーションが含む <a href="guide-structure-modules.html">モジュール</a> を指定するものです。</p>
<p>このプロパティは、モジュールの ID をキーとする、モジュールのクラスまたは <a href="guide-concept-configurations.html">構成情報</a> の配列です。
例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'modules'</span> =&gt; [
        <span class="hljs-comment">// モジュールクラスで指定された "booking" モジュール</span>
        <span class="hljs-string">'booking'</span> =&gt; <span class="hljs-string">'app\modules\booking\BookingModule'</span>,

        <span class="hljs-comment">// 構成情報の配列で指定された "comment" モジュール</span>
        <span class="hljs-string">'comment'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'app\modules\comment\CommentModule'</span>,
            <span class="hljs-string">'db'</span> =&gt; <span class="hljs-string">'db'</span>,
        ],
    ],
]
</code></pre>
<p>詳細は <a href="guide-structure-modules.html">モジュール</a> の節を参照してください。</p>
<h4><span class="broken-link">yii\base\Application::name</span>  <span id="name"></span><a href="#name" class="hashlink">&para;</a></h4><p>このプロパティは、エンドユーザに対して表示されるアプリケーション名を指定するものです。
<span class="broken-link">yii\base\Application::id</span> プロパティがユニークな値を取らなければならないのとは違って、このプロパティの値は主として表示目的であり、ユニークである必要はありません。</p>
<p>コードのどこにも使わないのであれば、このプロパティは必ずしも構成する必要はありません。</p>
<h4><span class="broken-link">yii\base\Application::params</span>  <span id="params"></span><a href="#params" class="hashlink">&para;</a></h4><p>このプロパティは、グローバルにアクセス可能なアプリケーションパラメータの配列を指定するものです。
コードの中のいたる処でハードコードされた数値や文字列を使う代りに、それらをアプリケーションパラメータとして一ヶ所で定義し、必要な場所ではそのパラメータを使うというのが良いプラクティスです。
例えば、次のように、サムネール画像のサイズをパラメータとして定義することが出来ます。</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'params'</span> =&gt; [
        <span class="hljs-string">'thumbnail.size'</span> =&gt; [<span class="hljs-number">128</span>, <span class="hljs-number">128</span>],
    ],
]
</code></pre>
<p>そして、このサイズの値を使う必要があるコードにおいては、下記のようなコードを使うだけで済ませることが出来ます。</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$size</span> = \Yii::<span class="hljs-variable">$app</span>-&gt;params[<span class="hljs-string">'thumbnail.size'</span>];
<span class="hljs-variable">$width</span> = \Yii::<span class="hljs-variable">$app</span>-&gt;params[<span class="hljs-string">'thumbnail.size'</span>][<span class="hljs-number">0</span>];
</code></pre>
<p>後でサムネールのサイズを変更すると決めたときは、アプリケーションの構成情報においてのみサイズを修正すればよく、これに依存するコードには少しも触れる必要がありません。</p>
<h4><span class="broken-link">yii\base\Application::sourceLanguage</span>  <span id="sourceLanguage"></span><a href="#sourceLanguage" class="hashlink">&para;</a></h4><p>このプロパティはアプリケーションコードが書かれている言語を指定するものです。
デフォルト値は <code>'en-US'</code>、アメリカ合衆国の英語です。
あなたのコードのテキストのコンテントが英語以外で書かれているときは、このプロパティを構成しなければなりません。</p>
<p><a href="#language">language</a> プロパティと同様に、このプロパティは <a href="http://ja.wikipedia.org/wiki/IETF%E8%A8%80%E8%AA%9E%E3%82%BF%E3%82%B0">IETF 言語タグ</a> に従って構成しなければなりません。
例えば、<code>en</code> は英語を意味し、<code>en-US</code> はアメリカ合衆国の英語を意味します。</p>
<p>このプロパティに関する詳細は <a href="guide-tutorial-i18n.html">国際化</a> の節で読むことが出来ます。</p>
<h4><span class="broken-link">yii\base\Application::timeZone</span>  <span id="timeZone"></span><a href="#timeZone" class="hashlink">&para;</a></h4><p>このプロパティは、PHP ランタイムのデフォルトタイムゾーンを設定する代替手段として提供されています。
このプロパティを構成することによって、本質的には PHP 関数 <a href="http://php.net/manual/ja/function.date-default-timezone-set.php">date_default_timezone_set()</a> を呼び出すことになります。
例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'timeZone'</span> =&gt; <span class="hljs-string">'Asia/Tokyo'</span>,
]
</code></pre>
<h4><span class="broken-link">yii\base\Application::version</span>  <span id="version"></span><a href="#version" class="hashlink">&para;</a></h4><p>このプロパティはアプリケーションのバージョンを指定するものです。デフォルト値は <code>'1.0'</code> です。
コードの中で全く使わないのであれば、必ずしも構成する必要はありません。</p>
<h3>有用なプロパティ  <span id="useful-properties"></span><a href="#useful-properties" class="hashlink">&para;</a></h3><p>この項で説明されるプロパティは通常は構成されません。というのは、そのデフォルト値が通常の規約を指定しているからです。
しかしながら、規約を破る必要がある場合には、これらのプロパティを構成することが出来ます。</p>
<h4><span class="broken-link">yii\base\Application::charset</span>  <span id="charset"></span><a href="#charset" class="hashlink">&para;</a></h4><p>このプロパティはアプリケーションが使う文字セットを指定するものです。
デフォルト値は <code>'UTF-8'</code> であり、あなたのアプリケーションが多数の非ユニコードデータを使うレガシーシステムと連携するのでなければ、たいていのアプリケーションでは、そのままにしておくべきです。</p>
<h4><span class="broken-link">yii\base\Application::defaultRoute</span>  <span id="defaultRoute"></span><a href="#defaultRoute" class="hashlink">&para;</a></h4><p>このプロパティは、リクエストがルートを指定していないときにアプリケーションが使用すべき <a href="guide-runtime-routing.html">ルート</a> を指定するものです。
ルートは、チャイルドモジュール ID、コントローラ ID、および/または アクション ID を構成要素とすることが出来ます。
例えば、<code>help</code>、<code>post/create</code>、<code>admin/post/create</code> などです。
アクション ID が与えられていない場合は、<span class="broken-link">yii\base\Controller::defaultAction</span> で指定されるデフォルト値を取ります。</p>
<p><span class="broken-link">yii\web\Application</span> では、このプロパティのデフォルト値は <code>'site'</code> であり、その意味するところは、<code>SiteController</code> コントローラとそのデフォルトアクションが使用されるべきである、ということです。
結果として、ルートを指定せずにアプリケーションにアクセスすると、<code>app\controllers\SiteController::actionIndex()</code> の結果が表示されます。</p>
<p><span class="broken-link">yii\console\Application</span> では、デフォルト値は <code>'help'</code> であり、コアコマンドの <span class="broken-link">yii\console\controllers\HelpController::actionIndex()</span> が使用されるべきであるという意味です。
結果として、何も引数を与えずに <code>yii</code> というコマンドを実行すると、ヘルプ情報が表示されることになります。</p>
<h4><span class="broken-link">yii\base\Application::extensions</span>  <span id="extensions"></span><a href="#extensions" class="hashlink">&para;</a></h4><p>このプロパティは、アプリケーションにインストールされて使われている <a href="guide-structure-extensions.html">エクステンション</a> のリストを指定するものです。
デフォルトでは、<code>@vendor/yiisoft/extensions.php</code> というファイルによって返される配列を取ります。
<code>extensions.php</code> は、<a href="https://getcomposer.org">Composer</a> を使ってエクステンションをインストールすると、自動的に生成され保守されます。
ですから、たいていの場合、このプロパティをあなたが構成する必要はありません。</p>
<p>エクステンションを手作業で保守したいという特殊なケースにおいては、次のようにしてこのプロパティを構成することが出来ます。</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'extensions'</span> =&gt; [
        [
            <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'extension name'</span>,
            <span class="hljs-string">'version'</span> =&gt; <span class="hljs-string">'version number'</span>,
            <span class="hljs-string">'bootstrap'</span> =&gt; <span class="hljs-string">'BootstrapClassName'</span>,  <span class="hljs-comment">// オプション、構成情報の配列でもよい</span>
            <span class="hljs-string">'alias'</span> =&gt; [  <span class="hljs-comment">// optional</span>
                <span class="hljs-string">'@alias1'</span> =&gt; <span class="hljs-string">'to/path1'</span>,
                <span class="hljs-string">'@alias2'</span> =&gt; <span class="hljs-string">'to/path2'</span>,
            ],
        ],

        <span class="hljs-comment">// ... 上記と同じように、更にエクステンションを構成 ...</span>

    ],
]
</code></pre>
<p>ご覧のように、このプロパティはエクステンションの仕様を示す配列を取ります。
それぞれのエクステンションは、<code>name</code> と <code>version</code> の要素を含む配列によって指定されます。
エクステンションが <a href="guide-runtime-bootstrapping.html">ブートストラップ</a> の過程で走る必要がある場合には、<code>bootstrap</code> 要素をブートストラップのクラス名または <a href="guide-concept-configurations.html">構成情報</a> の配列によって指定することが出来ます。
また、エクステンションはいくつかの <a href="guide-concept-aliases.html">エイリアス</a> を定義することも出来ます。</p>
<h4><span class="broken-link">yii\base\Application::layout</span>  <span id="layout"></span><a href="#layout" class="hashlink">&para;</a></h4><p>このプロパティは、<a href="guide-structure-views.html">ビュー</a> をレンダリングするときに使われるべきデフォルトのレイアウトを指定するものです。
デフォルト値は <code>'main'</code> であり、<a href="#layoutPath">レイアウトパス</a> の下にある <code>main.php</code> というファイルが使われるべきことを意味します。
<a href="#layoutPath">レイアウトパス</a> と <a href="#viewPath">ビューパス</a> の両方がデフォルト値を取る場合、デフォルトのレイアウトファイルは <code>@app/views/layouts/main.php</code> というパスエイリアスとして表すことが出来ます。</p>
<p>滅多には無いことですが、レイアウトをデフォルトで無効にしたい場合は、このプロパティを <code>false</code> として構成することが出来ます。</p>
<h4><span class="broken-link">yii\base\Application::layoutPath</span>  <span id="layoutPath"></span><a href="#layoutPath" class="hashlink">&para;</a></h4><p>このプロパティは、レイアウトファイルが捜されるべきパスを指定するものです。
デフォルト値は、<a href="#viewPath">ビューパス</a> の下の <code>layouts</code> サブディレクトリです。
<a href="#viewPath">ビューパス</a> がデフォルト値を取る場合、デフォルトのレイアウトパスは <code>@app/views/layouts</code> というパスエイリアスとして表すことが出来ます。</p>
<p>このプロパティはディレクトリまたはパス <a href="guide-concept-aliases.html">エイリアス</a> として構成することが出来ます。</p>
<h4><span class="broken-link">yii\base\Application::runtimePath</span>  <span id="runtimePath"></span><a href="#runtimePath" class="hashlink">&para;</a></h4><p>このプロパティは、ログファイルやキャッシュファイルなどの一時的ファイルを生成することが出来るパスを指定するものです。
デフォルト値は、<code>@app/runtime</code> というエイリアスで表現されるディレクトリです。</p>
<p>このプロパティはディレクトリまたはパス <a href="guide-concept-aliases.html">エイリアス</a> として構成することが出来ます。
ランタイムパスは、アプリケーションを実行するプロセスによって書き込みが可能なものでなければならないことに注意してください。
そして、この下にある一時的ファイルは秘匿を要する情報を含みうるものですので、ランタイムパスはエンドユーザによるアクセスから保護されなければなりません。</p>
<p>このパスに簡単にアクセスできるように、Yii は <code>@runtime</code> というパスエイリアスを事前に定義しています。</p>
<h4><span class="broken-link">yii\base\Application::viewPath</span>  <span id="viewPath"></span><a href="#viewPath" class="hashlink">&para;</a></h4><p>このプロパティはビューファイルが配置されるルートディレクトリを指定するものです。
デフォルト値は、<code>@app/views</code> というエイリアスで表現されるディレクトリです。
このプロパティはディレクトリまたはパス <a href="guide-concept-aliases.html">エイリアス</a> として構成することが出来ます。</p>
<h4><span class="broken-link">yii\base\Application::vendorPath</span>  <span id="vendorPath"></span><a href="#vendorPath" class="hashlink">&para;</a></h4><p>このプロパティは、<a href="https://getcomposer.org">Composer</a> によって管理される vendor ディレクトリを指定するものです。
Yii フレームワークを含めて、あなたのアプリケーションによって使われる全てのサードパーティライブラリを格納するディレクトリです。
デフォルト値は、<code>@app/vendor</code> というエイリアスで表現されるディレクトリです。</p>
<p>このプロパティはディレクトリまたはパス <a href="guide-concept-aliases.html">エイリアス</a> として構成することが出来ます。
このプロパティを修正するときは、必ず、Composer の構成もそれに合せて修正してください。</p>
<p>このパスに簡単にアクセスできるように、Yii は <code>@vendor</code> というパスエイリアスを事前に定義しています。</p>
<h4><span class="broken-link">yii\console\Application::enableCoreCommands</span>  <span id="enableCoreCommands"></span><a href="#enableCoreCommands" class="hashlink">&para;</a></h4><p>このプロパティは <span class="broken-link">yii\console\Application</span> においてのみサポートされています。
Yii リリースに含まれているコアコマンドを有効にすべきか否かを指定するものです。デフォルト値は <code>true</code> です。</p>
<h2>アプリケーションのイベント  <span id="application-events"></span><a href="#application-events" class="hashlink">&para;</a></h2><p>アプリケーションはリクエストを処理するライフサイクルの中でいくつかのイベントをトリガします。
これらのイベントに対して、下記のようにして、アプリケーションの構成情報の中でイベントハンドラをアタッチすることが出来ます。</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'on beforeRequest'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable">$event</span>)</span> </span>{
        <span class="hljs-comment">// ...</span>
    },
]
</code></pre>
<p><code>on eventName</code> という構文の使い方については、<a href="guide-concept-configurations.html#configuration-format">構成情報</a> の節で説明されています。</p>
<p>別の方法として、アプリケーションのインスタンスが生成された後、<a href="guide-runtime-bootstrapping.html">ブートストラップの過程</a> の中でイベントハンドラをアタッチすることも出来ます。
例えば、</p>
<pre><code class="hljs php language-php">\Yii::<span class="hljs-variable">$app</span>-&gt;on(\yii\base\Application::EVENT_BEFORE_REQUEST, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable">$event</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>
});
</code></pre>
<h3><span class="broken-link">yii\base\Application::EVENT_BEFORE_REQUEST</span>  <span id="beforeRequest"></span><a href="#beforeRequest" class="hashlink">&para;</a></h3><p>このイベントは、アプリケーションがリクエストを処理する <em>前</em> にトリガされます。
実際のイベント名は <code>beforeRequest</code> です。</p>
<p>このイベントがトリガされるときには、アプリケーションのインスタンスは既に構成されて初期化されています。
ですから、イベントメカニズムを使って、リクエスト処理のプロセスに干渉するカスタムコードを挿入するのには、ちょうど良い場所です。
例えば、このイベントハンドラの中で、何らかのパラメータに基づいて <span class="broken-link">yii\base\Application::language</span> プロパティを動的にセットすることが出来ます。</p>
<h3><span class="broken-link">yii\base\Application::EVENT_AFTER_REQUEST</span>  <span id="afterRequest"></span><a href="#afterRequest" class="hashlink">&para;</a></h3><p>このイベントは、アプリケーションがリクエストの処理を完了した <em>後</em>、レスポンスを送信する <em>前</em> にトリガされます。
実際のイベント名は <code>afterRequest</code> です。</p>
<p>このイベントがトリガされるときにはリクエストの処理は完了していますので、この機をとらえて、リクエストに対する何らかの後処理をしたり、レスポンスをカスタマイズしたりすることが出来ます。</p>
<p><span class="broken-link">yii\web\Response</span> コンポーネントも、エンドユーザにレスポンスのコンテントを送出する間にいくつかのイベントをトリガすることに注意してください。
それらのイベントは、このイベントの <em>後</em> にトリガされます。</p>
<h3><span class="broken-link">yii\base\Application::EVENT_BEFORE_ACTION</span>  <span id="beforeAction"></span><a href="#beforeAction" class="hashlink">&para;</a></h3><p>このイベントは、<a href="guide-structure-controllers.html">コントローラアクション</a> を実行する <em>前</em> に毎回トリガされます。
実際のイベント名は <code>beforeAction</code> です。</p>
<p>イベントのパラメータは <span class="broken-link">yii\base\ActionEvent</span> のインスタンスです。
イベントハンドラは、<span class="broken-link">yii\base\ActionEvent::isValid</span> プロパティを <code>false</code> にセットして、アクションの実行を中止することが出来ます。
例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'on beforeAction'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable">$event</span>)</span> </span>{
        <span class="hljs-keyword">if</span> (何らかの条件) {
            <span class="hljs-variable">$event</span>-&gt;isValid = <span class="hljs-keyword">false</span>;
        } <span class="hljs-keyword">else</span> {
        }
    },
]
</code></pre>
<p>同じ <code>beforeAction</code> イベントが、<a href="guide-structure-modules.html">モジュール</a> と <a href="guide-structure-controllers.html">コントローラ</a> からもトリガされることに注意してください。
アプリケーションオブジェクトが最初にこのイベントをトリガし、次に (もし有れば) モジュールが、そして最後にコントローラがこのイベントをトリガします。
イベントハンドラが <span class="broken-link">yii\base\ActionEvent::isValid</span> を <code>false</code> にセットすると、後続のイベントはトリガされません。</p>
<h3><span class="broken-link">yii\base\Application::EVENT_AFTER_ACTION</span>  <span id="afterAction"></span><a href="#afterAction" class="hashlink">&para;</a></h3><p>このイベントは、<a href="guide-structure-controllers.html">コントローラアクション</a> を実行した <em>後</em> に毎回トリガされます。
実際のイベント名は <code>afterAction</code> です。</p>
<p>イベントのパラメータは <span class="broken-link">yii\base\ActionEvent</span> のインスタンスです。
<span class="broken-link">yii\base\ActionEvent::result</span> プロパティを通じて、イベントハンドラはアクションの結果にアクセスしたり、またはアクションの結果を修正したり出来ます。
例えば、</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'on afterAction'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable">$event</span>)</span> </span>{
        <span class="hljs-keyword">if</span> (何らかの条件) {
            <span class="hljs-comment">// $event-&gt;result を修正する</span>
        } <span class="hljs-keyword">else</span> {
        }
    },
]
</code></pre>
<p>同じ <code>afterAction</code> イベントが、<a href="guide-structure-modules.html">モジュール</a> と <a href="guide-structure-controllers.html">コントローラ</a> からもトリガされることに注意してください。
これらのオブジェクトは、<code>beforeAction</code> の場合とは逆の順でイベントをトリガします。
すなわち、コントローラオブジェクトが最初にこのイベントをトリガし、次に (もし有れば) モジュールが、そして最後にアプリケーションがこのイベントをトリガします。</p>
<h2>アプリケーションのライフサイクル <span id="application-lifecycle"></span><a href="#application-lifecycle" class="hashlink">&para;</a></h2><p><img src="images/application-lifecycle.png" alt="アプリケーションのライフサイクル" /></p>
<p><a href="guide-structure-entry-scripts.html">エントリスクリプト</a> が実行されて、リクエストが処理されるとき、アプリケーションは次のようなライフサイクルを経ます。</p>
<ol>
<li>エントリスクリプトがアプリケーションの構成情報を配列として読み出す。</li>
<li>エントリスクリプトがアプリケーションの新しいインスタンスを作成する。<ul>
<li><span class="broken-link">yii\base\Application::preInit()</span> が呼び出されて、<span class="broken-link">yii\base\Application::basePath</span> のような、優先度の高いアプリケーションプロパティを構成する。</li>
<li><span class="broken-link">yii\base\Application::errorHandler</span> を登録する。</li>
<li>アプリケーションのプロパティを構成する。</li>
<li><span class="broken-link">yii\base\Application::init()</span> が呼ばれ、そこから更に、ブートストラップコンポーネントを走らせるために、<span class="broken-link">yii\base\Application::bootstrap()</span> が呼ばれる。</li>
</ul>
</li>
<li>エントリスクリプトが <span class="broken-link">yii\base\Application::run()</span> を呼んで、アプリケーションを走らせる。<ul>
<li><span class="broken-link">yii\base\Application::EVENT_BEFORE_REQUEST</span> イベントをトリガする。</li>
<li>リクエストを処理する: リクエストを <a href="guide-runtime-routing.html">ルート</a> とそれに結び付くパラメータとして解決する。
 ルートによって指定されたモジュール、コントローラ、および、アクションを作成する。
 そしてアクションを実行する。</li>
<li><span class="broken-link">yii\base\Application::EVENT_AFTER_REQUEST</span> イベントをトリガする。</li>
<li>エンドユーザにレスポンスを送信する。</li>
</ul>
</li>
<li>エントリスクリプトがアプリケーションから終了ステータスを受け取り、リクエストの処理を完了する。</li>
</ol>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Tue, 27 Dec 2016 22:28:42 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
